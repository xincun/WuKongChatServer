swagger: "2.0"
info:
  description: "悟空聊天IM API"
  version: "1.0.0"
  title: "悟空聊天IM API"
host: "49.235.59.182:8080"
tags:
  - name: "user"
    description: "用户"
  - name: "friend"
    description: "好友"
  - name: "group"
    description: "群组"
  - name: "message"
    description: "消息"
  - name: "conversation"
    description: "最近会话"  
  - name: "favorite"
    description: "收藏" 
  - name: "wallet"
    description: "钱包"  
  - name: "redpacket"
    description: "红包"  
  - name: "transfer"
    description: "转账"
  - name: "label"
    description: "标签"
  - name: "other"
    description: "其他"
schemes:
  - "http"
basePath: "/v1"

paths:
  /user/register:
    post:
      tags:
        - "user"
      summary: "用户注册"
      description: "用户注册"
      operationId: "register"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "body"
          name: "req"
          description: "注册请求"
          required: true
          schema:
            type: object
            properties:
              zone:
                type: string
                description: "区号"
              phone: 
                 type: string
                 description: "手机号" 
              code:
                 type: string
                 description: "验证码"
              password:
                 type: string
                 description: "密码"
              device:
                  type: object
                  properties:
                   device_id:
                    type: string
                    description: "设备ID"
                   device_name:
                    type: string
                    description: "设备名称"
                   device_model:
                    type: string
                    description: "设备型号"
      responses:
        200:
          description: "返回"
          schema:
            $ref: '#/definitions/UserLoginResp'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
  /user/login:
    post:
      tags:
        - "user"
      summary: "用户登录"
      description: "用户登录"
      operationId: "login"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "body"
          name: "req"
          description: "登录请求"
          required: true
          schema:
            $ref: "#/definitions/UserLoginReq"
      responses:
        200:
          description: "返回"
          schema:
            $ref: '#/definitions/UserLoginResp'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
  /user/search:
    get:
      tags:
        - "user"
      summary: "搜索用户（精准查询）"
      description: "搜索用户（精准查询"
      operationId: "userSearch"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "query"
          name: "keyword"
          type: string
          description: "关键字"
          required: true
      responses:
        200:
          description: "返回"
          schema:
            $ref: '#/definitions/UserExistResp'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []      
  /users/{uid}:
    get:
      tags:
        - "user"
      summary: "获取指定uid的用户信息"
      description: "获取指定uid的用户信息"
      operationId: "userGet"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          name: "uid"
          type: string
          description: "用户uid"
          required: true
      responses:
        200:
          description: "返回"
          schema:
            $ref: '#/definitions/UserDetailResp'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response' 
      security:
        - token: []      
  /users/{uid}/setting:
    put:
      tags:
        - "user"
      summary: "修改用户设置"
      description: "修改用户设置"
      operationId: "userSettingUpdate"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          name: "uid"
          type: string
          description: "用户uid"
          required: true
      responses:
        200:
          description: "返回"
          schema:
            $ref: '#/definitions/UserSettingReq'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []      
  /user/device_token:
    post:
      tags:
        - "user"
      summary: "注册用户设备"
      description: "注册用户设备"
      operationId: "registerUserDeviceToken"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "body"
          name: "req"
          schema:
            $ref: '#/definitions/UserDeviceReq'
      responses:
        200:
          description: "返回"
          schema:
            $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response' 
      security:
        - token: []      
    delete:
      tags:
        - "user"
      summary: "卸载用户设备"
      description: "卸载用户设备"
      operationId: "unregisterUserDeviceToken"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      responses:
        200:
          description: "返回"
          schema:
            $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response' 
      security:
        - token: []      
  /user/device_badge:
    post:
      tags:
        - "user"
      summary: "注册设备红点数量"
      description: "注册设备红点数量"
      operationId: "registerUserDeviceBadge"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "body"
          name: "req"
          schema:
            properties:
              badge:
               type: integer
               description: 红点数量
      responses:
        200:
          description: "返回"
          schema:
            $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response' 
      security:
        - token: []      
  /user/grant_login:
    get:
      tags:
        - "user"
      summary: "授权登录"
      description: "授权登录（app扫描授权登录，例如PC端二维码登录）"
      operationId: "grantLogin"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "query"
          name: "auth_code"
          type: string
          description: 授权码
      responses:
        200:
          description: "返回"
          schema:
            $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response' 
      security:
        - token: []
  /user/devices:
    get:
      tags:
        - "user"
      summary: "获取用户登录设备"
      description: "获取用户登录设备"
      operationId: "devices"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      responses:
        200:
          description: "返回"
          schema:
            type: array
            items:
              properties:
               device_id:
                type: string
                description: "设备ID"
               device_name:
                type: string
                description: "设备名称"
               device_model:
                type: string
                description: "设备类型"
               last_login:
                type: string
                description: "最后一次登录时间"
               self:
                type: integer
                description: "是否是本机 1:是0：否"
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
  /user/devices/{device_id}:
    delete:
      tags:
        - "user"
      summary: "删除登录设备"
      description: '删除登录设备'
      operationId: 'devicesDelete'
      consumes:
        - 'application/json'
      produces:
        - 'application/json'
      parameters:
        - in: 'path'
          name: 'device_id'
          type: string
          description: '设备ID'
          required: true
      responses:
        200:
          description: "成功"
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
  /user/customerservices:
    get:
      tags:
        - 'user'
      summary: '客服列表'
      description: '客服列表'
      operationId: 'customerservices'
      consumes:
        - "application/json"
      produces:
        - "application/json"
      responses:
        200:
          description: "成功"
          schema:
            type: array
            items:
              properties:
               uid:
                type: string
                description: "用户ID"
               name:
                type: string
                description: "用户名称"
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
  /user/chatpwd:
    post:
      tags:
        - 'user'
      summary: '设置用户聊天密码'
      description: '设置用户聊天密码'
      operationId: 'chatPwd'
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "body"
          name: "req"
          description: "请求数据"
          required: true
          schema:
            type: object
            properties:
             chat_pwd:
              type: string
              description: '聊天密码'
             login_pwd:
              type: string
              description: '用户登录密码'
      responses:
        200:
          description: "成功"
          schema:
            $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
  /user/blacklists:
    get:
      tags:
        - 'user'
      summary: "用户黑名单列表"
      description: "用户黑名单列表"
      operationId: "blacklists"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      responses:
        200:
          description: "成功"
          schema:
            type: array
            items:
              properties:
               uid:
                type: string
                description: "用户ID"
               name:
                type: string
                description: "用户名称"
               username:
                type: string
                description: '用户名称'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
  /user/blacklist/{uid}:
    delete:
      tags:
        - "user"
      summary: "移除黑名单"
      description: '移除黑名单'
      operationId: 'blacklistDelete'
      consumes:
        - 'application/json'
      produces:
        - 'application/json'
      parameters:
        - in: 'path'
          name: 'uid'
          type: string
          description: '被移除的用户ID'
          required: true
      responses:
        200:
          description: "成功"
          schema:
            $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
    post:
      tags:
        - "user"
      summary: "添加黑名单"
      description: '添加黑名单'
      operationId: 'blacklistAdd'
      consumes:
        - 'application/json'
      produces:
        - 'application/json'
      parameters:
        - in: 'path'
          name: 'uid'
          type: string
          description: '添加的用户ID'
          required: true
      responses:
        200:
          description: "成功"
          schema:
            $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
  /user/sms/login_check_phone:
    post:
      tags:
        - "user"
      summary: "发送登录设备验证验证码"
      description: '发送登录设备验证验证码'
      operationId: 'sendLoginCheckPhone'
      consumes:
        - 'application/json'
      produces:
        - 'application/json'
      parameters:
        - in: 'body'
          name: 'req'
          description: '请求数据'
          required: true
          schema:
            type: object
            properties:
             uid:
              type: string
              description: '用户ID'
      responses:
        200:
          description: "成功"
          schema:
            $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
  /user/login/check_phone:
    post:
      tags:
        - "user"
      summary: "登录验证设备手机号"
      description: '登录验证设备手机号'
      operationId: 'checkLoginCode'
      consumes:
        - 'application/json'
      produces:
        - 'application/json'
      parameters:
        - in: 'body'
          name: 'req'
          description: '请求数据'
          required: true
          schema:
            type: object
            properties:
             uid:
              type: string
              description: '用户ID'
             code:
              type: string
              description: '验证码'
      responses:
        200:
          description: "成功"
          schema:
            $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
  /user/sms/registercode:
    post:
      tags:
        - "user"
      summary: "获取注册短信"
      description: '获取注册短信'
      operationId: 'reigsterCode'
      consumes:
        - 'application/json'
      produces:
        - 'application/json'
      parameters:
        - in: 'body'
          name: 'req'
          description: '请求数据'
          required: true
          schema:
            type: object
            properties:
             zone:
              type: string
              description: '区号'
             phone:
              type: string
              description: '手机号'
      responses:
        200:
          description: "成功"
          schema:
            $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
  /users/{uid}/im:
    post:
      tags:
        - "user"
      summary: "获取用户所在IM节点信息"
      description: '获取用户所在IM节点信息'
      operationId: 'userIM'
      consumes:
        - 'application/json'
      produces:
        - 'application/json'
      parameters:
        - in: 'path'
          name: 'uid'
          type: string
          description: '请求数据'
          required: true
      responses:
        200:
          description: "成功"
          schema:
            type: object
            properties:
             tcp_addr:
              type: string
              description: 'ip/prot'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
  /users/current:
    put:
      tags:
        - "user"
      summary: "修改用户信息"
      description: '修改用户信息'
      operationId: 'userCurrent'
      consumes:
        - 'application/json'
      produces:
        - 'application/json'
      parameters:
        - in: 'body'
          name: 'req'
          description: '请求数据'
          required: true
          schema:
            type: object
            properties:
             name:
              type: string
              description: '张三'
      responses:
        200:
          description: "成功"
          schema:
            $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
  /user/chat/online:
    get:
      tags:
        - "user"
      summary: "获取在线用户"
      description: '获取在线用户'
      operationId: 'userOnLine'
      consumes:
        - 'application/json'
      produces:
        - 'application/json'
      responses:
        200:
          description: "成功"
          schema:
            type: array
            items:
             properties:
              online:
               type: integer
               description: '1:在线0:离线'
              uid:
               type: string
               description: '用户ID'
              last_offline:
               type: integer
               description: '最近一次离线时间'
              device_flag:
               type: integer
               description: '设备标示'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
  /friend/apply:
    post:
      tags:
        - "friend"
      summary: "申请加好友"
      description: "申请加好友,系统将发送消息给被加人，消息里带有这次操作的凭证token"
      operationId: "friendApply"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "body"
          name: "req"
          description: "请求数据"
          required: true
          schema:
            $ref: "#/definitions/ApplyReq"
      responses:
        200:
          description: "成功"
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
  /friend/sure:
    post:
      tags:
        - "friend"
      summary: "确认好友申请"
      description: "确认好友申请（接收好友申请的人，确认当前申请的时候调用，当确认成功后系统将发送消息给对方，对方收到消息后需要同步自己的好友数据）"
      operationId: "friendSure"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "body"
          name: "req"
          description: "请求数据"
          required: true
          schema:
            $ref: "#/definitions/SureReq"
      responses:
        200:
          description: "成功"
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
  /friend/sync:
    post:
      tags:
        - "friend"
      summary: "同步好友信息"
      description: "同步好友信息"
      operationId: "friendSync"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "query"
          name: "sync_key"
          type: "string"
          description: "同步key,格式： 最新更新时间@id"
        - in: "query"
          name: "limit"
          type: integer
          format: int64
          description: "最大限制"
      responses:
        200:
          description: "成功"
          schema:
            type: array
            items:
              $ref: '#/definitions/FriendResp'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
  /friend/online:
    post:
      tags:
        - "friend"
      summary: "同步最近在线聊天的好友"
      description: "同步最近在线聊天的好友"
      operationId: "friendOnline"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      responses:
        200:
          description: "成功"
          schema:
            type: array
            items:
              type: object
              properties:
                uid:
                 type: string
                online:
                 type: integer
                 description: "0:离线1:在线"
                last_offline:
                 type: integer
                 description: '最后一次在线时间'
                device_flag:
                 type: integer
                 description: '设备标志'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
  /message/sync:
    post:
      tags:
        - "message"
      summary: "消息同步"
      description: "消息同步,如果传了频道ID则表示同步指定频道的消息"
      operationId: "messageSync"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "body"
          name: "req"
          schema:
            $ref: '#/definitions/MsgSyncReq'
          description: "同步请求"
      responses:
        200:
          description: "成功"
          schema:
            type: array
            items:
              $ref: '#/definitions/MsgSyncResp'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
  /message:
    delete:
      tags:
        - "message"
      summary: "删除消息"
      description: "删除消息"
      operationId: "deleteMessage"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "query"
          name: "message_id"
          type: "integer"
          description: "消息唯一ID（如果是删除单个消息只需要填写此字段，如果是删除频道内的所有消息则不需要填写此字段）"
        - in: "query"
          name: "channel_id"
          type: "string"
          description: "频道唯一ID"
        - in: "query"
          name: "channel_type"
          type: "integer"
          description: "频道类型 1.单聊 2.群聊"  
      responses:
        200:
          description: "成功"
          schema:
            type: array
            items:
              $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []    
  /message/revoke:
    post:
      tags:
        - "message"
      summary: "撤回消息"
      description: "撤回消息"
      operationId: "revoke"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "query"
          name: "message_id"
          type: "integer"
          description: "需要撤回的消息id"
        - in: "query"
          name: "channel_id"
          type: "string"
          description: "频道唯一ID"
        - in: "query"
          name: "channel_type"
          type: "integer"
          description: "频道类型 1.单聊 2.群聊"  
      responses:
        200:
          description: "成功"
          schema:
            type: array
            items:
              $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []          
  /message/syncack/{last_message_seq}:
    post:
      tags:
        - "message"
      summary: "消息同步回执"
      description: "消息同步回执"
      operationId: "messageSyncack"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          name: "last_message_seq"
          required: true
          type: string
          description: "最后一次消息的message_seq"
      responses:
        200:
          description: "成功"
          schema:
            type: array
            items:
              $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []      
  /group/create:
    post:
      tags:
        - "group"
      summary: "创建群组"
      description: "创建群组"
      operationId: "groupCreate"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "body"
          name: "req"
          schema:
            $ref: '#/definitions/GroupCreateReq'
          description: "请求"
      responses:
        200:
          description: "成功"
          schema:
            $ref: '#/definitions/GroupResp'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
  /groups/{group_no}:
    get:
      tags:
        - "group"
      summary: "查询群信息"
      description: "查询群信息"
      operationId: "groupGet"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          name: "group_no"
          type: string
          required: true
          description: "请求"
      responses:
        200:
          description: "成功"
          schema:
            $ref: '#/definitions/GroupResp'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: [] 
    put:
      tags:
        - "group"
      summary: "更新群组"
      description: "创建群组"
      operationId: "groupUpdate"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          type: string
          name: 'group_no'
          required: true
        - in: "body"
          name: "req"
          description: "如果只需要修改群名则只需要传name 同理修改公告只需要传notice"
          schema:
            $ref: '#/definitions/GroupUpdateReq'
      responses:
        200:
          description: "成功"
          schema:
            $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []  
  /groups/{group_no}/setting:
    put:
      tags:
        - "group"
      summary: "更新群设置"
      description: "更新群设置"
      operationId: "groupSettingUpdate"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          type: string
          name: 'group_no'
          required: true
        - in: "body"
          name: "req"
          description: "如果只需要修改群免打扰则只需要传mute 同理修改置顶只需要传top，所有参数 0.表示关闭 1.表示打开"
          schema:
            $ref: '#/definitions/GroupSettingUpdateReq'
      responses:
        200:
          description: "成功"
          schema:
            $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []         
  /groups/{group_no}/members:
    post:
      tags:
        - "group"
      summary: "添加群成员"
      description: "添加群成员"
      operationId: "memberAdd"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          name: "group_no"
          type: "string"
          required: true
        - in: "body"
          name: "req"
          schema:
            $ref: '#/definitions/GroupmemberAddReq'
          description: "请求"
      responses:
        200:
          description: "成功"
          schema:
            $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
    delete:
      tags:
        - "group"
      summary: "移除群成员"
      description: "移除群成员"
      operationId: "memberRemove"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          name: "group_no"
          type: "string"
          required: true
        - in: "body"
          name: "req"
          schema:
            $ref: '#/definitions/GroupmemberRemoveReq'
          description: "请求"
      responses:
        200:
          description: "成功"
          schema:
            $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []    
  /groups/{group_no}/members/{uid}:
    put:
      tags:
        - "group"
      summary: "修改群成员信息"
      description: "修改群成员信息"
      operationId: "memberUpdate"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          name: "group_no"
          type: "string"
          required: true
          description: 群编号
        - in: "path"
          name: "uid"
          type: "string"
          required: true  
          description: 群成员uid
        - in: "body"
          name: "req"
          schema:
            $ref: '#/definitions/GroupMemberUpdateReq'
          description: "请求"
      responses:
        200:
          description: "成功"
          schema:
            $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []      
  /groups/{group_no}/membersync:
    get:
      tags:
        - "group"
      summary: "同步群成员"
      description: "同步群成员"
      operationId: "syncMembers"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          name: "group_no"
          type: "string"
          required: true
        - in: "query"
          name: "version"
          type: "string"
          description: "数据版本号"
        - in: "query"
          name: "limit"
          type: "integer"
          description: "限量"  
      responses:
        200:
          description: "成功"
          schema:
            type: array
            items:
              $ref: '#/definitions/MemberDetailResp'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []     
    
  /groups/{group_no}/managers:
    post:
      tags:
        - "group"
      summary: "添加群管理员"
      description: "添加群管理员"
      operationId: "managerAdd"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          name: "group_no"
          type: "string"
          required: true
        - in: "body"
          name: "req"
          schema:
            type: array
            items:
              type: string
          description: "请求"
      responses:
        200:
          description: "成功"
          schema:
            $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
    delete:
      tags:
        - "group"
      summary: "移除群管理员"
      description: "移除群管理员"
      operationId: "managerRemove"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          name: "group_no"
          type: "string"
          required: true
        - in: "body"
          name: "req"
          schema:
            type: array
            items:
              type: string
          description: "请求"
      responses:
        200:
          description: "成功"
          schema:
            $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []   
  /groups/{group_no}/forbidden/{on}:  
    post:
      tags:
        - "group"
      summary: "全员禁言"
      description: "全员禁言"
      operationId: "groupForbidden"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          name: "group_no"
          type: "string"
          required: true
        - in: "path"
          name: "on"
          type: "number"
          description: "0.关闭禁言 1.开启禁言"
          required: true  
      responses:
        200:
          description: "成功"
          schema:
            $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
  /groups/{group_no}/qrcode:  
    get:
      tags:
        - "group"
      summary: "获取群二维码信息"
      description: "获取群二维码信息"
      operationId: "groupQRCode"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          name: "group_no"
          type: "string"
          required: true
      responses:
        200:
          description: "成功"
          schema:
            type: object
            properties:
              day:
                type: "number"
                description: "二维码几天后失效 例如:7 表示7天后失效"
              qrcode:
                type: "string"
                description: "二维码内容，客户端用此值生成对应的二维码"
              expire:
                type: "string"
                description: "失效时间，例如4月21日"
             
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
  /groups/{group_no}/transfer/{to_uid}:  
    post:
      tags:
        - "group"
      summary: "群主转让"
      description: "群主转让"
      operationId: "transferGrouper"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          name: "group_no"
          type: "string"
          description: "转让的群唯一编号"
          required: true
        - in: "path"
          name: "to_uid"
          type: "string"
          description: "接受者用户uid"
          required: true  
      responses:
        200:
          description: "成功"
          schema:
            $ref: '#/definitions/response'
             
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []  
  /groups/{group_no}/member/invite:  
    post:
      tags:
        - "group"
      summary: "群成员邀请"
      description: "群成员邀请，群开启邀请确认后调用此接口进行邀请，直接添加群成员的接口将不对普通成员开放。"
      operationId: "groupMemberInviteAdd"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          name: "group_no"
          type: "string"
          description: "群唯一编号"
          required: true
        - in: "body"
          name: "req"
          description: "接受者用户uid"
          schema:
            type: object
            properties:
              uids:
                type: array
                description: "被邀请的成员uid集合"
                items:
                  type: string
              remark: 
                 type: string
                 description: "邀请备注，给管理员或群主查看"
      responses:
        200:
          description: "成功"
          schema:
            $ref: '#/definitions/response'
             
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: [] 
  /groups/{group_no}/member/h5confirm:  
    get:
      tags:
        - "group"
      summary: "获取邀请确认界页面的url（带有授权码）"
      description: "可以获取到带有授权码的邀请确认界页面的url，仅管理员或群主可获取"
      operationId: "getToGroupMemberConfirmInviteDetailH5"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          name: "group_no"
          type: "string"
          description: "群唯一编号"
          required: true
        - in: "query"
          name: "invite_no"
          type: "string"
          description: "邀请唯一编号"
        - in: "body"
          name: "req"
          description: "接受者用户uid"
          schema:
            type: object
            properties:
              url:
                type: string
                description: "带有授权码的邀请确认页面"
                items:
                  type: string
      responses:
        200:
          description: "成功"
          schema:
            $ref: '#/definitions/response'
             
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []       
  /conversations:
    get:
      tags:
        - "conversation"
      summary: "获取当前用户最近会话"
      description: "获取当前用户最近会话"
      operationId: "getConversations"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      responses:
        200:
          description: "成功"
          schema:
            type: array
            items:
              $ref: '#/definitions/ConversationResp'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []  
  /qrcode/{code}:  
    get:
      tags:
        - "other"
      summary: "处理二维码信息"
      description: "处理二维码信息"
      operationId: "handleQRCodeInfo"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          name: "code"
          type: "string"
          description: "二维码code"
          required: true
      responses:
        200:
          description: "成功"
          schema:
            type: object
            properties:
              forward:
                type: "string"
                description: "跳转方式 native：原生跳转 h5：h5页面跳转"
              type:
                type: "string"
                description: "处理者类型 webview: 表示跳转到webview，group: 表示跳转到群会话"
              data:
                type: object
                description: "数据"
             
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []   
  /favorite/my:  
    get:
      tags:
        - "favorite"
      summary: "我的收藏列表"
      description: "我的收藏列表"
      operationId: "favoriteMy"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "query"
          name: "page_index"
          type: "integer"
          description: "页码"
        - in: "query"
          name: "page_size"
          type: "integer"
          description: "页大小"
      responses:
        200:
          description: "成功"
          schema:
            type: array
            items:
              type: object
              properties:
                no:
                 type: string
                 description: "收藏唯一编号"
                type:
                 type: integer
                 description: "收藏类型 1. 纯文本 2. 图片" 
                unique_key:
                 type: string
                 description: "唯一key 如果是收藏消息，此字段一般为message_id" 
                author_uid:
                 type: string
                 description: "作者uid"  
                author_name:
                 type: string
                 description: "作者名称" 
                created_at:
                 type: string
                 description: "创建时间" 
                payload:
                  type: object
                  description: 如果是文本消息 格式为 {content:"这是文本吧内容"} 如果是图片消息 格式为 {content:"http://xxxxx.com/img.jpg"}
              
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []  
  /favorites:  
    post:
      tags:
        - "favorite"
      summary: "添加收藏"
      description: "添加收藏"
      operationId: "favoriteAdd"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "body"
          name: "body"
          description: "提交数据"
          required: true
          schema:
            type: object
            properties:
              type:
                type: integer
                description: "收藏类型 1. 纯文本 2. 图片"
              unique_key: 
                 type: string
                 description: "唯一key 如果是收藏消息，此字段一般为message_id" 
              author_uid: 
                 type: string
                 description: "作者uid份"
              author_name: 
                 type: string
                 description: "作者名称"
              payload: 
                 type: object
                 description: 如果是文本消息 格式为 {content:"这是文本吧内容"} 如果是图片消息 格式为 {content:"http://xxxxx.com/img.jpg"}   
        - in: "query"
          name: "page_size"
          type: "integer"
          description: "页大小"
          required: true  
      responses:
        200:
          description: "成功"
          schema:
            $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: [] 
  /favorites/{no}:  
    delete:
      tags:
        - "favorite"
      summary: "删除收藏"
      description: "删除收藏"
      operationId: "favoriteDelete"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          name: "no"
          type: "string"
          required: true
          description: "收藏唯一编号"
      responses:
        200:
          description: "成功"
          schema:
            $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []  
  /wallet/my:  
    get:
      tags:
        - "wallet"
      summary: "我的钱包信息"
      description: "我的钱包信息"
      operationId: "walletMy"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      responses:
        "200":
          description: "成功"
          schema:
            type: object
            properties:
              amount:
                type: "integer"
                description: "钱包金额，单位分"
              status:
                type: "integer"
                description: "钱包状态 1.为正常 其他都为异常"
              password_is_set:
                type: "integer"
                description: "是否设置支付密码 0.否 1.是"  
        "400":
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: [] 
  /wallet/channel/recharge:
    get:
      tags:
        - "wallet"
      summary: "获取充值渠道"
      description: "获取充值渠道"
      operationId: "walletChannelRechargeList"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      responses:
        "200":
          description: '成功'
          schema:
            type: array
            items:
              type: object
              properties:
                title:
                  type: "string"
                  description: "渠道标题"
                icon:
                  type: "string"
                  description: "渠道ICON  base64的图片"  
                type:
                  type: "integer"
                  description: "渠道类型"
        "400":
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []       
  /wallet/recharge:
    post:
      tags:
        - "wallet"
      summary: "钱包充值"
      description: "钱包充值"
      operationId: "walletRecharge"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "body"
          name: "body"
          description: "提交数据"
          required: true  
          schema:
            type: object
            properties:
              amount:
                type: integer
                format: int64
                description: "充值金额"  
              pay_type:
                type: integer
                description: "支付类型（渠道类型）"  
      responses:
        "200":
          description: '成功'
          schema:
            type: object
            properties:
                pay_type:
                  type: "integer"
                  description: "支付类型（渠道类型）"
                trade_no:
                  type: "string"
                  description: "交易编号"  
                body:
                  type: "string"
                  description: "渠道数据 例如：{\"pay_no\":\"\",\"forward_type\":\"WEB\",\"result\":{\"url\":\"http://apicardc.hiljsvf.cn/wgzf.to.pay?businessNumber=75b5bfcfba334b93b1a8176f9640bfc4\"}}  forward_type为跳转方式 result为提供跳转方式对应的数据 如果是WEB提供的则是跳转的url 如果是NATIVE 则提供的是具体跳转数据 例如支付 则提供的为启动支付包的数据"
        "400":
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []      
  /wallet/pay/smscode/paypwd:  
    post:
      tags:
        - "wallet"
      summary: "发送支付验证码"
      description: "发送支付验证码"
      operationId: "walletSMSCodeGet"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      responses:
        "200":
          description: '成功'
          schema:
            $ref: '#/definitions/response'  
        "400":
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: [] 
  /wallet/pay/smscode/paypwdverity:  
    post:
      tags:
        - "wallet"
      summary: "验证码修改支付密码的短信验证码"
      description: "验证码修改支付密码的短信验证码"
      operationId: "walletSMSCodeVerity"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "body"
          name: "body"
          description: "提交数据"
          required: true  
          schema:
            type: object
            properties:
              code:
                type: string
                description: "验证码"
      responses:
        "200":
          description: '成功'
          schema:
            $ref: '#/definitions/response'  
        "400":
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
  /wallet/pay/password:
    post:
      tags:
        - "wallet"
      summary: "设置支付密码"
      description: "设置支付密码"
      operationId: "walletPayPasswordSet"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "body"
          name: "body"
          description: "提交数据"
          required: true  
          schema:
            type: object
            properties:
              code:
                type: string
                description: "验证码"
              password:
                type: string
                description: "支付密码"  
      responses:
        "200":
          description: '成功'
          schema:
            $ref: '#/definitions/response'  
        "400":
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: [] 
  /wallet/pay/token:
    post:
      tags:
        - "wallet"
      summary: "获取支付token"
      description: "获取支付token"
      operationId: "walletPayTokenGet"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "body"
          name: "body"
          description: "提交数据"
          required: true  
          schema:
            type: object
            properties:
              password:
                type: string
                description: "支付密码"  
      responses:
        "200":
          description: '成功'
          schema:
            type: object
            properties:
              pay_token:
                type: "string"
                description: "支付token"
        "400":
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
  /wallet/records:
    get:
      tags:
        - "wallet"
      summary: "钱包交易记录"
      description: "钱包交易记录"
      operationId: "walletRecordPage"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "query"
          name: "page_index"
          type: "integer"
          description: "页码"
        - in: "query"
          name: "page_size"
          type: "integer"
          description: "页大小"  
      responses:
        "200":
          description: '成功'
          schema:
            type: array
            items:
              type: object
              properties:
                record_id:
                  type: "string"
                  description: "记录ID"
                amount:
                  type: "integer"
                  format: int64
                  description: "记录ID 单位分"
                created_at:
                  type: "string"
                  description: "记录产生时间 例如 2020-10-01 12:24:11"
                title:
                  type: "string"
                  description: "记录标题"
                remark:
                  type: "string"
                  description: "记录备注"
                balance:
                  type: "integer"
                  format: int64
                  description: "余额"  
        "400":
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: [] 
  /wallet/customerservices:
    get:
      tags:
        - "wallet"
      summary: "客服列表"
      description: "客服列表"
      operationId: "walletCustomerservices"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      responses:
        "200":
          description: '成功'
          schema:
            type: array
            items:
              type: object
              properties:
                uid:
                  type: "string"
                  description: "用户UID"
                name:
                  type: "string"
                  description: "客服列表"
        "400":
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
  /wallet/bankcards:
    post:
      tags:
        - "wallet"
      summary: "添加银行卡"
      description: "添加银行卡"
      operationId: "walletBankcardAdd"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "body"
          name: "body"
          description: "提交数据"
          required: true  
          schema:
            type: object
            properties:
              bankcard:
                type: string
                description: "银行卡号"   
              bankcard_type:
                type: string
                description: "银行卡类型 DC:储蓄卡 CC：信用卡"   
              bankcode:
                type: string
                description: "银行代号"   
              bankname:
                type: string
                description: "银行名称"
              phone:
                type: string
                description: "银行预留手机号"
              verode:
                type: string
                description: "预留手机号收到的验证码"  
              holder_name:
                type: string
                description: "持卡人名称 如果已实名认证非必填"
              cert_type:
                type: integer
                description: "持卡人证件类型 1.身份证 目前只支持身份证 如果已实名认证非必填" 
              cert_no:
                type: integer
                description: "证件编号 如果已实名认证非必填"   
      responses:
        "200":
          description: '成功'
          schema:
            $ref: '#/definitions/response'
        "400":
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
    get:
      tags:
        - "wallet"
      summary: "获取我绑定的银行卡"
      description: "获取我绑定的银行卡"
      operationId: "walletBankcardList"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      responses:
        "200":
          description: '成功'
          schema:
            type: "array"
            items:
              type: object
              properties:
                id: 
                  type: integer
                  format: int64
                  description: "银行卡ID"
                bankcard_type:
                  type: string
                  description: "银行卡类型 DC储蓄卡 CC信用卡"   
                bankcard_type_name:  
                  type: string
                  description: "银行卡类型名称"
                bankcard:
                  type: string
                  description: "银行卡号"
                bankname:
                  type: string
                  description: "银行名称" 
                bankcode:
                  type: string
                  description: "银行代码" 
                bank_logo:
                  type: string
                  description: "银行logo"
                bank_cover:
                  type: string
                  description: "银行封面图(背景图)" 
        "400":
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []    
  /wallet/banks:
    get:
      tags:
        - "wallet"
      summary: "获取银行列表"
      description: "获取银行列表"
      operationId: "walletBankList"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      responses:
        "200":
          description: '成功'
          schema:
            type: "array"
            items:
              type: "object"
              properties:
                code:
                  type: string
                  description: "银行代号" 
                name:
                  type: string
                  description: "银行名称"   
        "400":
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []   
  /wallet/bankcard/info:
    get:
      tags:
        - "wallet"
      summary: "查询银行卡的信息"
      description: "查询银行卡的信息"
      operationId: "walletBankcardInfo"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "query"
          type: "string"
          name: "bankcard"
          description: "银行卡"
      responses:
        "200":
          description: '成功'
          schema:
            type: "object"
            properties:
              vaild:
                  type: "integer"
                  description: "银行卡是否有效 0. 银行卡无效 1.银行卡有效" 
              data:
                  type: object
                  properties:
                    bankcard_type:
                      type: "string"
                      description: "银行卡类型 DC储蓄卡 CC信用卡"
                    bankname:
                      type: "string"
                      description: "银行名称"
                    bankcode:
                      type: "string"
                      description: "银行代码"  
        "400":
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []  
  /wallet/nameauth:
    get:
      tags:
        - "wallet"
      summary: "查询我的实名认证信息"
      description: "查询我的实名认证信息"
      operationId: "walletNameAuthInfoGet"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      responses:
        "200":
          description: '成功'
          schema:
            type: "object"
            properties:
              is_auth:
                  type: "integer"
                  description: "是否已认证 0.否 1.是" 
              data:
                  type: object
                  properties:
                    cert_type:
                      type: "integer"
                      description: "证件类型 默认1 1.身份证"
                    cert_no:
                      type: "string"
                      description: "证件编号"
                    name:
                      type: "string"
                      description: "真实名字"  
        "400":
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []   
  /wallet/withdraw/explain:
    get:
      tags:
        - "wallet"
      summary: "提现描述"
      description: "提现描述"
      operationId: "withdrawExplain"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      responses:
        "200":
          description: '成功'
          schema:
            type: object
            properties:
              explain:
                type: array
                description: "说明"
                items:
                  type: "string"
              min_withdraw_amount:
                type: integer
                format: int64
                description: "最小提现金额（单位分）"
              max_withdraw_amount:
                type: integer
                format: int64
                description: "最大提现金额（单位分）"  
        "400":
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []      
  /wallet/withdraw:
    post:
      tags:
        - "wallet"
      summary: "提现"
      description: "提现"
      operationId: "walletWithdraw"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "body"
          name: "body"
          description: "提交数据"
          required: true  
          schema:
            type: object
            properties:
              pay_token:
                type: string
                description: "支付token"
              amount:
                type: integer
                format: int64
                description: "提现金额" 
              account_type:
                type: "string"
                description: "账户类型 WX，ALIPAY" 
              account:
                type: "string"
                description: "账户"  
              holder_name:
                type: "string"
                description: "账户持有人"   
              bankcard_id:
                type: integer
                format: int64
                description: "银行卡ID（只有银行卡支付才需要这个id）" 
              device_os:
                type: "string"
                description: "设备os"
              bundle_id:
                type: "string"
                description: " bundle的ID"  
      responses:
        "200":
          description: '成功'
          schema:
            $ref: '#/definitions/response' 
        "400":
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: [] 
        
  /redpackets:  
    post:
      tags:
        - "redpacket"
      summary: "创建红包"
      description: "创建红包"
      operationId: "redpacketCreate"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "body"
          name: "body"
          description: "提交数据"
          required: true
          schema:
            type: object
            properties:
              amount:
                type: integer
                format: int64
                description: "红包金额，单位分"
              blessing: 
                 type: string
                 description: " 祝福语" 
              type: 
                 type: integer
                 description: "红包类型 1.固定金额 2.随机金额"
              num: 
                 type: integer
                 description: "红包数量"
      responses:
        200:
          description: "成功"
          schema:
            type: object
            properties:
              redpacket_no:
                type: "string"
                description: "红包编号"
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []   
  /redpackets/{redpacket_no}/pay:  
    post:
      tags:
        - "redpacket"
      summary: "支付红包"
      description: "支付红包"
      operationId: "redpacketPay"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          name: "redpacket_no"
          type: "string"
          description: "红包编号"
          required: true
        - in: "body"
          name: "body"
          description: "提交数据"
          required: true
          schema:
            type: object
            properties:
              pay_token:
                type: string
                description: "支付token"
              pay_type: 
                 type: integer
                 description: " 支付类型 （不传或4为余额支付）" 
      responses:
        200:
          description: "成功"
          schema:
            $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: [] 
  /redpackets/{redpacket_no}/get:  
    get:
      tags:
        - "redpacket"
      summary: "抢红包"
      description: "抢红包"
      operationId: "redpacketGet"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          name: "redpacket_no"
          type: "string"
          description: "红包编号"
          required: true
      responses:
        200:
          description: "成功"
          schema:
            type: object
            properties:
              blessing:
                type: "string"
                description: "红包祝福语"
              status:
                type: integer
                description: "红包状态: 1.抢到红包 2.当前用户已开红包 3.红包被抢完了 4.已过期"
              sender_uid:
                type: string
                description: "发红包人的uid"
              sender_name:
                type: string
                description: "发红包人的昵称"  
                
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []         
  /redpackets/{redpacket_no}/open:  
    post:
      tags:
        - "redpacket"
      summary: "开红包"
      description: "开红包"
      operationId: "redpacketOpen"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          name: "redpacket_no"
          type: "string"
          description: "红包编号"
          required: true
        - in: "body"
          name: "body"
          description: "提交数据"
          required: true
          schema:
            type: object
            properties:
              channel_id:
                type: string
                description: "频道ID"
              channel_type: 
                 type: integer
                 description: " 频道类型" 
      responses:
        200:
          description: "成功"
          schema:
            $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: [] 
  /redpackets/{redpacket_no}:  
    get:
      tags:
        - "redpacket"
      summary: "红包详情"
      description: "红包详情"
      operationId: "redpacketDetail"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          name: "redpacket_no"
          type: "string"
          description: "红包编号"
          required: true
      responses:
        200:
          description: "成功"
          schema:
            type: object
            properties:
              redpacket_no:
                type: "string"
                description: "红包编号"
              channel_id:
                type: "string"
                description: "频道ID"
              channel_type:
                type: "integer"
                format: "uint8"
                description: "频道类型"
              blessing:
                type: "string"
                description: "红包祝福语"
              status:
                type: integer
                description: "红包状态: 1.抢到红包 2.当前用户已开红包 3.红包被抢完了 4.已过期"
              sender:
                type: string
                description: "发红包人的uid"
              sender_name:
                type: string
                description: "发红包人的昵称"
              total_num:
                type: integer
                description: "红包总数量" 
              opened_num:
                type: integer
                description: "红包已领取数量" 
              my_open_amount:
                type: integer
                format: int64
                description: "我领取的金额"
              finished_time:
                type: integer
                description: "红包抢完时间"
              amount:
                type: integer
                format: int64
                description: "红包金额"
              balance:
                type: integer
                format: int64
                description: "红包余额"  
              finished_spend:
                type: integer
                description: "红包多久抢完（单位秒）"  
              records:
                type: array
                items:
                  type: object
                  properties:
                    open_amount:
                      type: integer
                      format: int64
                      description: "领取金额(单位分)"
                    open_time:
                      type: integer
                      format: int64
                      description: "领取时间戳(10位到秒)"
                    uid:
                      type: string
                      description: "领取用户的uid"
                    name:
                      type: string
                      description: "领取用户的名称"
                
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: [] 
  /redpacket/years:  
    get:
      tags:
        - "redpacket"
      summary: "红包记录可查询年份"
      description: "红包记录可查询年份"
      operationId: "redpacketYears"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      responses:
        200:
          description: "成功"
          schema:
            type: array
            items:
              type: string
                
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []  
  /redpacket/statistics/out:  
    get:
      tags:
        - "redpacket"
      summary: "发送红包统计"
      description: "发送红包统计"
      operationId: "redpacketStatisticsOut"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "query"
          name: "year"
          type: "string"
          description: "根据年份查询"
          required: true  
      responses:
        200:
          description: "成功"
          schema:
             type: "object"
             properties:
              total_amount:
                type: integer
                format: int64
                description: "共发出金额"
              total_num:
                type: integer
                description: "共发出数量"  
                
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []  
  /redpacket/statistics/in:  
    get:
      tags:
        - "redpacket"
      summary: "收到红包统计"
      description: "收到红包统计"
      operationId: "redpacketStatisticsIn"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "query"
          name: "year"
          type: "string"
          description: "根据年份查询"
          required: true  
      responses:
        200:
          description: "成功"
          schema:
             type: "object"
             properties:
              total_amount:
                type: integer
                format: int64
                description: "共收到金额"
              total_num:
                type: integer
                description: "共收到红包数量" 
              luck_num:
                type: integer
                description: "手气最佳红包数量"   
                
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
  /redpacket/record/out:  
    get:
      tags:
        - "redpacket"
      summary: "发送红包记录(分页)"
      description: "发送红包记录(分页)"
      operationId: "redpacketOutRecordPage"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "query"
          name: "year"
          type: "string"
          description: "根据年份查询"
          required: true 
        - in: "query"
          name: "page_index"
          type: integer
          description: "页码"
        - in: "query"
          name: "page_size"
          type: integer
          description: "页大小"
      responses:
        200:
          description: "成功"
          schema:
             type: "array"
             items:
               type: object
               properties:
                redpacket_no:
                  type: string
                  description: "红包编号"
                type:
                  type: integer
                  description: "红包类型 1.固定金额 2.随机金额"  
                amount:
                  type: integer
                  format: int64
                  description: "红包金额"
                num:
                  type: integer
                  description: "红包总数量"   
                open_num:
                  type: integer
                  description: "红包已打开数量" 
                status:
                  type: integer
                  description: "红包状态: 4.已过期"  
                create_date:
                  type: string
                  description: "创建日期 例如 09-03"   
                
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: [] 
  /redpacket/record/in:  
    get:
      tags:
        - "redpacket"
      summary: "收到红包记录(分页)"
      description: "收到红包记录(分页)"
      operationId: "redpacketInRecordPage"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "query"
          name: "year"
          type: "string"
          description: "根据年份查询"
          required: true 
        - in: "query"
          name: "page_index"
          type: integer
          description: "页码"
        - in: "query"
          name: "page_size"
          type: integer
          description: "页大小"
      responses:
        200:
          description: "成功"
          schema:
             type: "array"
             items:
               type: object
               properties:
                redpacket_no:
                  type: string
                  description: "红包编号"
                sender_uid:
                  type: string
                  description: " 红包发送者UID"
                sender_name:
                  type: string
                  description: "红包发送者名称"  
                type:
                  type: integer
                  description: "红包类型 1.固定金额 2.随机金额"  
                open_amount:
                  type: integer
                  format: int64
                  description: "打开金额"
                open_date:
                  type: string
                  description: "打开日期 例如 08-30"   
                
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []  
  /transfers:  
    post:
      tags:
        - "transfer"
      summary: "创建转账"
      description: "创建转账"
      operationId: "transferCreate"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "body"
          name: "body"
          description: "提交数据"
          required: true
          schema:
            type: object
            properties:
              pay_token:
                type: string
                description: "支付token"
              amount: 
                 type: "integer"
                 format: "int64"
                 description: "转账金额"
              to_uid: 
                 type: "string"
                 description: "接受者UID"  
              remark: 
                 type: "string"
                 description: "转账备注"     
      responses:
        200:
          description: "成功"
          schema:
            $ref: '#/definitions/response' 
                
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: [] 
  /transfers/{no}:  
    get:
      tags:
        - "transfer"
      summary: "查询转账"
      description: "查询转账"
      operationId: "transferGet"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          name: "no"
          description: "转账编号"
          required: true
          type: "string"    
      responses:
        200:
          description: "成功"
          schema:
            type: "object"
            properties:
              no:
                type: "string"
                description: "转账编号"
              amount:
                type: "integer"
                format: "int64"
                description: "转账金额"  
              to_uid:
                type: "string"
                description: "接受者uid"
              to_name:
                type: "string"
                description: "接受者名字" 
              created_at:
                type: "string"
                description: "创建时间"
              receive_at:
                type: "string"
                description: "收款时间 如果是已收款状态则有值"
              refund_at:
                type: "string"
                description: "退款时间 如果是过期状态则有值"  
              status:
                type: "integer"
                description: "转账状态 1.待领取 2.已领取 3.已过期"
                
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: [] 
  /transfers/{no}/receive:  
    post:
      tags:
        - "transfer"
      summary: "领取转账"
      description: "领取转账"
      operationId: "transferReceive"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          name: "no"
          description: "转账编号"
          required: true
          type: "string"    
      responses:
        200:
          description: "成功"
          schema:
           $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []      
        
  /label:
    post:
      tags:
        - "label"
      summary: "添加标签"
      description: "添加标签"
      operationId: "labelAdd"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "body"
          name: 'body'
          description: "标签内容"
          required: true
          schema:
            type: object
            properties:
              name:
                type: string
                description: "标签名称"
              member_uids:
                 type: array
                 items:
                   type: string
                 description: "成员uid集合" 
      responses:
        200:
          description: "成功"
          schema:
           $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
    get:
      tags:
        - "label"
      summary: "标签列表"
      description: "标签列表"
      operationId: "labelList"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      responses:
        200:
          description: "成功"
          schema:
            type: array
            items:
              properties:
                id:
                 type: integer
                 description: '标签ID'
                name:
                 type: string
                 description: '标签名称'
                count:
                 type: integer
                 description: '成员数量'
                members:
                  type: array
                  items:
                    properties:
                     uid:
                      type: string
                      description: "成员ID"
                     name:
                      type: string
                      description: "成员名称"
                     remark:
                      type: string
                      description: '成员备注'
                
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: [] 
        
  /label/{id}:
    put:
      tags:
        - "label"
      summary: "修改标签"
      description: "修改标签"
      operationId: "labelUpdate"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          name: "id"
          description: "标签ID"
          required: true
          type: "integer"
        - in: "body"
          name: 'body'
          description: "标签内容"
          required: true
          schema:
            type: object
            properties:
              name:
                type: string
                description: "标签名称"
              member_uids:
                 type: array
                 items:
                   type: string
                 description: "成员uid集合" 
      responses:
        200:
          description: "成功"
          schema:
           $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
    delete:
      tags:
        - "label"
      summary: "删除标签"
      description: "删除标签"
      operationId: "labelDelete"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          name: "id"
          description: "标签ID"
          required: true
          type: "integer"
      responses:
        200:
          description: "成功"
          schema:
           $ref: '#/definitions/response'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []
    get:
      tags:
        - "label"
      summary: "标签详情"
      description: "删除详情"
      operationId: "labelDetial"
      consumes:
        - "application/json"
      produces:
        - "application/json"
      parameters:
        - in: "path"
          name: "id"
          description: "标签ID"
          required: true
          type: "integer"
      responses:
        200:
          description: "成功"
          schema:
            type: object
            properties:
             id:
              type: integer
              description: '标签ID'
             name:
              type: string
              description: '标签名称'
             count:
              type: integer
              description: '标签成员数量'
             members:
              type: array
              items:
                 properties:
                  uid:
                   type: string
                   description: "成员ID"
                  name:
                   type: string
                   description: "成员名称"
                  remark:
                   type: string
                   description: '成员备注'
        400:
          description: '错误'
          schema:
            $ref: '#/definitions/response'
      security:
        - token: []    
        
securityDefinitions:
  token:
    type: "apiKey"
    in: "header"
    name: "token"
    description: "用户token"
definitions:
  UserDeviceReq:
    type: "object"
    description: 最近会话对象
    properties:
      device_token:  
        type: string
        description: "设备token"
      device_type:  
        type: string
        description: "设备类型,IOS，MI:小米，HMS: 华为"  
      bundle_id:  
        type: string
        description: "应用唯一ID iOS为bundleID Android为包名"    
  ConversationResp:
    type: "object"
    description: 最近会话对象
    properties:
      channel_id:  
        type: string
        description: "频道ID"
      channel_type:  
        type: integer
        format: uint8
        description: "频道类型"  
      unread:  
        type: integer
        format: int64
        description: "未读消息数量"    
      last_message:
        $ref: '#/definitions/MsgSyncResp'
  GroupMemberUpdateReq:
    type: "object"
    description: 群成员更新
    properties:
      remark:  
        type: string
        description: "成员备注"
  UserSettingReq:
    type: "object"
    description: 用户设置
    properties:
      mute:
        type: integer
        format: int
        description: "免打扰"
      top:  
        type: integer
        format: int
        description: "置顶"
  UserDetailResp:
    type: "object"
    properties:
      uid:
        type: string
        description: "用户唯一ID"
      name:
        type: string
        description: "用户名字" 
      mute:
        type: integer
        format: int
        description: "免打扰"
      top:  
        type: integer
        format: int
        description: "置顶"  
  GroupResp:
    type: "object"
    description: "群信息"
    properties:
      group_no:
        type: string
        description: "群唯一编号"
      name: 
        type: string
        description: "群名称"  
      created_at:
        type: string
        description: "创建时间"
      version:
        type: integer
        description: "数据版本号"  
      mute:
        type: integer
        format: int
        description: "免打扰"
      top:  
        type: integer
        format: int
        description: "置顶"
      save:  
        type: integer
        format: int
        description: "保存到通讯录"  
      show_nick:  
        type: integer
        format: int
        description: "显示群成员昵称"    
      updated_at:
        type: string
        description: "更新时间"  
  MemberDetailResp:
    type: "object"
    properties:
      id:
        type: integer
        format: uint64
        description: "唯一ID"
      uid:
        type: string
        description: "用户uid"
      name:
        type: string
        description: "成员名称"
      remark:
        type: string
        description: "成员备注"
      role:
        type: integer
        format: int
        description: "成员角色 0.普通成员  1.创建者 2.管理者"  
      is_deleted:
        type: integer
        format: int 
        description: "是否已删除 0.否 1.是"      
      created_at:
        type: string
        description: "创建时间"
      updated_at:
        type: string
        description: "更新时间"  
  GroupmemberRemoveReq:
    type: "object"
    properties:
      members:
        type: array
        items:
          type: string
        description: "成员uid集合"      
  GroupmemberAddReq:
    type: "object"
    properties:
      members:
        type: array
        items:
          type: string
        description: "成员uid集合"
  GroupCreateReq:
    type: "object"
    properties:
      name:
        type: string
        description: "群名"
      members:
        type: array
        items:
          type: string
        description: "成员uid集合"
  GroupSettingUpdateReq:
    type: "object"
    description: 群设置
    properties:
      mute:
        type: integer
        format: int
        description: "免打扰"
      top:  
        type: integer
        format: int
        description: "置顶"
      save:  
        type: integer
        format: int
        description: "保存到通讯录"  
      show_nick:  
        type: integer
        format: int
        description: "显示群成员昵称"  
  GroupUpdateReq:
    type: "object"
    properties:
      name:
        type: string
        description: "群名"
      notice:
        type: string
        description: "群公告"
      invite:
        type: number
        description: "是否开启确认邀请 0.否 1.是"  
  MsgSyncReq:
    type: "object"
    properties:
      max_message_seq:
        type: string
        description: "客户端最大消息序列号"
      limit:
        type: integer
        description: "消息数量限制"
      channel_id:
        type: string
        description: "频道ID"
      channel_type:
        type: integer
        format: uint8
        description: "频道类型"  
  MsgSyncResp:
    type: "object"
    properties:
      message_id:
        type: integer
        format: uint64
        description: 服务端的消息ID(全局唯一)
      message_seq:
        type: integer
        format: uint32
        description: 消息序列号 （用户唯一，有序递增）
      from_uid:
        type: string
        description: 发送者UID
      to_uid:
        type: string
        description: 接受者uid
      channel_id:
        type: string
        description: 频道ID
      channel_type:
        type: integer
        format: uint8
        description: 频道类型
      timestamp:
        type: integer
        format: int32
        description: 服务器消息时间戳(10位，到秒)
      payload:
        type: string
        description: 消息内容(base64编码的)
  UserExistResp:
    type: "object"
    properties:
      exist:
        type: integer
        format: int
        description: "是否存在用户 0.不存在 1.存在"
      data:
        $ref: '#/definitions/UserResp'
  UserResp:
    type: "object"
    properties:
      uid:
        type: string
        description: "用户唯一ID"
      name:
        type: string
        description: "用户名字"
  FriendResp:
    type: "object"
    properties:
      id:
        type: integer
        format: int64
        description: "唯一id,增量同步会用到"
      to_uid:
        type: string
        description: "好友uid"
      to_name:
        type: string
        description: "好友名称"
      created_at:
        type: string
        description: "创建时间"
      updated_at:
        type: string
        description: "更新时间"
  SureReq:
    type: "object"
    properties:
      token:
        type: "string"
        description: "申请加好友的凭证"
  ApplyReq:
    type: "object"
    properties:
      to_uid:
        type: "string"
        description: "向谁申请好友"
      remark:
        type: "string"
        description: "加好友的备注"
  UserLoginReq:
    type: "object"
    properties:
      username:
        type: "string"
        description: "用户名"
      password:
        type: "string"
        description: "密码"
      name:
        type: "string"
        description: "名字"
      flag:
        type: integer
        format: int
        description: "设备标示 0.APP 1.PC"  
      device:
        type: object
        properties:
         device_id:
          type: string
          description: "设备ID"
         device_name:
          type: string
          description: "设备名称"
         device_model:
          type: string
          description: "设备型号"
  UserLoginResp:
    type: "object"
    properties:
      uid:
        type: "string"
        description: "用户唯一ID"
      token:
        type: "string"
        description: "用户凭证"
      username:
        type: "string"
        description: "登录用户名"
      name:
        type: "string"
        description: "用户名称"
      sex:
        type: integer
        description: "性别"
      category:
        type: string
        description: "用户分类 '客服'"
      short_no:
        type: string
        description: "用户唯一短编号"
      zone:
        type: string
        description: "手机区号"
      phone:
        type: string
        description: "手机号"
      setting:
        type: object
        description: "用户设置"
        properties:
          search_by_phone:
            type: integer
            description: "是否可以通过手机号搜索0.否1.是"
          search_by_short:
            type: integer
            description: "是否可以通过短编号搜索0.否1.是"
          new_msg_notice:
            type: integer
            description: "新消息通知0.否1.是"
          msg_show_detail:
            type: integer
            description: "显示消息通知详情0.否1.是"
          voice_on:
            type: integer
            description: "声音0.否1.是"
          shock_on:
            type: integer
            description: "震动0.否1.是"
  response:
    type: "object"
    properties:
      status:
        type: integer
        format: int
      msg:
        type: "string"